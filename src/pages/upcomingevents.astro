---
import "../styles/global.css";
import { supabase } from "../db/supabase";
import UpcomingEvents from "../components/UpcomingEvents";

const {
  data: events,
  count,
  error,
} = await supabase
  .from("upcoming_events")
  .select("*", { count: "exact" })
  .range(0, 3);

if (error) {
  console.error("error fetching events", error);
}
---

<body class="bg-ivory-100/90 min-h-screen pt-10">
  <UpcomingEvents client:load initialEvents={events ?? []} count={count ?? 0} />
</body>

<style>
  body {
    font-family: "Montserrat Variable", sans-serif;
  }
</style>
